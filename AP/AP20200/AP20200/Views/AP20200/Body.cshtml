@using Ext.Net;
@using Ext.Net.MVC;
@using HQ.eSkyFramework;
@using HQ.eSkyFramework.HQControl;
@using AP20200;
@{
    Layout = null;
    var X = Html.X();
    var HQ = Html.HQ();
}

@(
    Html.X().Viewport().Layout(LayoutType.Fit)
    .Items(
        X.FormPanel()
        .Layout(LayoutType.Anchor)
        .Listeners(l=>l.BoxReady.Handler="loadSourceCombo();")
        .ID("frmMain")
        .TrackResetOnLoad(true)
        .DefaultAnchor("100%")
        .BodyPadding(10)
        .BodyBorder(0).AutoScroll(true)
        .KeyMap(Util.SetupKeyMap())
        .TopBar(Util.SetupToolbar("PO20100"))
        .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
        .Items(
            X.Panel().ID("pnlHeader").Layout(LayoutType.VBox).Region(Region.Center)
            .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Stretch }).Border(false)
            .Items(
                // First Column
                X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 5 0")
                .Flex(1).MinWidth(200)
                .LayoutConfig(new HBoxLayoutConfig { Align = HBoxAlign.Top })
                .Items(
                    HQ.Combo().ID("cboVendID").Name("cboVendID").HQLangCode("VendID").HQProcedure("AP20200_pcGetVendor")
                    .HQColumnShow("VendID,Name,Address").DisplayField("VendID").ValueField("VendID")
                    .AllowBlank(false)
                    .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0").AllowBlank(false).Editable(true)
                    .HQParam(new StoreParameterCollection() 
                        { 
                            new StoreParameter() { Name = "@UserID", Value = "HQ.userName", Mode = ParameterMode.Raw }
                        })
                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                    .LoadData()
                    .Listeners(lst =>
                        {
                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                            lst.Change.Fn = "cboVendID_Change";
                        })
                        , HQ.TextBox().ID("txtName").Name("txtName").HQLangCode("Name").DataIndex("Name")
                        .Width(400).MarginSpec("5 0 0 0").AllowBlank(false)
                         .Listeners(lst =>
                                        {
                                            lst.Change.Fn = "txtName_Change";
                                        })
                    )
                , X.TabPanel().Layout(LayoutType.HBox).MarginSpec("0 0 5 0")
                .Flex(1).MinWidth(200)
                .LayoutConfig(new HBoxLayoutConfig { Align = HBoxAlign.Top })
                .Items
                (
                    X.Panel().Title(Util.GetLang("VendInfo")).Layout(LayoutType.VBox).MarginSpec("0 0 5 0")
                    .Flex(1).MinWidth(200)
                    .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Left })
                    .Items
                    (
                        HQ.Combo().ID("cboClassID").Name("cboClassID").HQLangCode("ClassID").HQProcedure("AP20200_pcClassID")
                        .HQColumnShow("ClassID,Descr").DisplayField("Descr").ValueField("ClassID").Width(300).DataIndex("ClassID")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                        ,HQ.Combo().ID("cboStatus").Name("cboStatus").HQLangCode("Status").HQProcedure("AP20200_pcStatus")
                        .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").Width(300).DataIndex("Status")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                        ,HQ.Combo().ID("cboTermsID").Name("cboTermsID").HQLangCode("TermsID").HQProcedure("AP20200_pcTerms_Vend")
                        .HQColumnShow("TermsID,Descr").DisplayField("Descr").ValueField("TermsID").Width(300).DataIndex("Terms")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                         ,HQ.Combo().ID("cboDfltOrdFromId").Name("cboDfltOrdFromId").HQLangCode("DefaultID").HQProcedure("AP20200_pcDefID")
                        .HQColumnShow("OrdFromId,VendID").DisplayField("OrdFromId").ValueField("OrdFromId").Width(300).DataIndex("DfltOrdFromId")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .HQParam(new StoreParameterCollection() 
                        {
                            new StoreParameter() { Name = "@VendID", Value = "App.cboVendID.getValue()", Mode = ParameterMode.Raw }
                        })
                        .LoadData()
                        
                         ,HQ.Combo().ID("cboTaxDflt").Name("cboTaxDflt").HQLangCode("TaxDflt").HQProcedure("AP20200_pcTaxDflt")
                        .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").Width(300).DataIndex("TaxDflt")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .HQParam(new StoreParameterCollection() 
                        {
                            new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw }
                        })
                        .LoadData()
                        
                          ,HQ.Combo().ID("cboTaxId00").Name("cboTaxId00").HQLangCode("TaxId00").HQProcedure("AP20200_pcTaxAll")
                        .HQColumnShow("TaxID,Descr,TaxRate").DisplayField("Descr").ValueField("TaxID").Width(300).DataIndex("TaxId00")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                         ,HQ.Combo().ID("cboTaxId01").Name("cboTaxId01").HQLangCode("TaxId01").HQProcedure("AP20200_pcTaxAll")
                        .HQColumnShow("TaxID,Descr,TaxRate").DisplayField("Descr").ValueField("TaxID").Width(300).DataIndex("TaxId01")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                         ,HQ.Combo().ID("cboTaxId02").Name("cboTaxId02").HQLangCode("TaxId02").HQProcedure("AP20200_pcTaxAll")
                        .HQColumnShow("TaxID,Descr,TaxRate").DisplayField("Descr").ValueField("TaxID").Width(300).DataIndex("TaxId02")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                         ,HQ.Combo().ID("cboTaxId03").Name("cboTaxId03").HQLangCode("TaxId03").HQProcedure("AP20200_pcTaxAll")
                        .HQColumnShow("TaxID,Descr,TaxRate").DisplayField("Descr").ValueField("TaxID").Width(300).DataIndex("TaxId03")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                        
                         ,HQ.TextBox().ID("txtTaxLocId").Name("txtTaxLocId").HQLangCode("TaxLocId").DataIndex("TaxLocId")
                        .Width(300).MarginSpec("5 0 0 0")
                        
                         ,HQ.TextBox().ID("txtPmtMethod").Name("txtPmtMethod").HQLangCode("PmtMethod").DataIndex("PmtMethod")
                        .Width(300).MarginSpec("5 0 0 0")
                        
                         ,HQ.NumberField().ID("txtCrlmt").Name("txtCrlmt").HQLangCode("Crlmt").DataIndex("Crlmt")
                        .Width(300).MarginSpec("5 0 0 0")
                        
                         ,HQ.NumberField().ID("txtMOQVal").Name("txtMOQVal").HQLangCode("MOQVal").DataIndex("MOQVal")
                        .Width(300).MarginSpec("5 0 0 0")
                        
                        ,HQ.Combo().ID("cboMOQType").Name("cboMOQType").HQLangCode("MOQType").HQProcedure("AP20200_pcMOQType")
                        .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").Width(300).DataIndex("MOQType")
                        .HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                        .LoadData()
                     
                    )
                     
                    ,X.Panel().Title(Util.GetLang("Address"))
                    .Layout(LayoutType.VBox).MarginSpec("0 0 5 0")
                    .Flex(1).MinWidth(200)
                    .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Left })
                    .Items(
                    
                          X.Panel()
                          .Layout(LayoutType.VBox).MarginSpec("0 0 5 0")
                          .Flex(1).MinWidth(200)
                          .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Left })
                          .Items(
                          
                              X.Container()
                              .Layout(LayoutType.HBox).MarginSpec("0 0 5 0")
                              .Flex(1).MinWidth(200)
                              .LayoutConfig(new HBoxLayoutConfig { Align = HBoxAlign.Stretch })
                              .Items(
                              
                                     X.Panel().Border(true)
                                  .Layout(LayoutType.VBox).MarginSpec("0 0 5 0")
                                  .Flex(1).MinWidth(200)
                                  .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Center }).Width(320)
                                  .Items
                                        (
                                        
                                        HQ.TextBox().ID("txtShipName").Name("txtShipName").HQLangCode("Name")//.DataIndex("Name")
                                        .Width(300).MarginSpec("5 5 5 5").ReadOnly(true).Enable(false)
                                        
                                        ,HQ.TextBox().ID("txtAttn").Name("txtAttn").HQLangCode("Attn").DataIndex("Attn")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtSalut").Name("txtSalut").HQLangCode("Salut").DataIndex("Salut")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtAddr1").Name("txtAddr1").HQLangCode("Addr1").DataIndex("Addr1")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtAddr2").Name("txtAddr2").HQLangCode("Addr2").DataIndex("Addr2")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.Combo().ID("cboCountry").Name("cboCountry").HQLangCode("Country").HQProcedure("AP20200_pcCountryID")
                                        .HQColumnShow("CountryID,Descr").DisplayField("Descr").ValueField("CountryID").Width(300).DataIndex("Country")
                                        .HQHeightWidth(400, 300).MarginSpec("5 5 5 5")
                                        .LoadData()
                                         .Listeners(lst =>
                                        {
                                            lst.Change.Fn = "cboCountry_Change";
                                        })
                                        
                                        ,HQ.Combo().ID("cboState").Name("cboState").HQLangCode("State").HQProcedure("AP20200_pcStateByCountry")
                                        .HQColumnShow("State,Descr").DisplayField("Descr").ValueField("State").DataIndex("State").ForceSelection(true)
                                        .Width(300).HQHeightWidth(400, 300).MarginSpec("5 5 5 5").AllowBlank(false)
                                        .HQParam(new StoreParameterCollection() 
                                            { 
                                                new StoreParameter() { Name = "@Country", Value = "App.cboCountry.getValue()", Mode = ParameterMode.Raw }                                                                                    
                                            })
                                        .LoadData()
                                        .Listeners(lst =>
                                            {
                                                lst.Change.Fn = "cboState_Change";
                                            })
                                        
                                        ,HQ.Combo().ID("cboCity").Name("cboCity").HQLangCode("City").HQProcedure("AP20200_pcCityByCountryState")
                                        .HQColumnShow("City,Name").DisplayField("Name").ValueField("City").DataIndex("City")
                                        .Width(300).HQHeightWidth(400, 300).MarginSpec("5 5 5 5").AllowBlank(false)
                                        .HQParam(new StoreParameterCollection() 
                                            { 
                                                new StoreParameter() { Name = "@Country", Value = "App.cboCountry.getValue()", Mode = ParameterMode.Raw }
                                                ,new StoreParameter() { Name = "@State", Value = "App.cboState.getValue()", Mode = ParameterMode.Raw }                                                                                    
                                            })
                                        .LoadData()
                                        
                                        ,HQ.TextBox().ID("txtShipZip").Name("txtShipZip").HQLangCode("Zip").DataIndex("Zip")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtPhone").Name("txtPhone").HQLangCode("Phone").DataIndex("Phone")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtFax").Name("txtFax").HQLangCode("Fax").DataIndex("Fax")
                                        .Width(300).MarginSpec("5 5 5 5")
                                        
                                        ,HQ.TextBox().ID("txtEMailAddr").Name("txtEMailAddr").HQLangCode("EmailAddr").DataIndex("EMailAddr")
                                        .Width(300).MarginSpec("5 5 5 5")
                                         
                                        )
                                        
                                    ,  X.Panel().Border(true)
                                    .Layout(LayoutType.VBox).MarginSpec("0 0 5 20")
                                    .Flex(1).MinWidth(200)
                                    .LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Left }).Width(320)
                                    .Items
                                        (
                                        HQ.TextBox().ID("txtBillName").Name("txtBillName").DataIndex("RemitName")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillAttn").Name("txtBillAttn").DataIndex("RemitAttn")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillSalut").Name("txtBillSalut").DataIndex("RemitSalut")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillAddr1").Name("txtBillAddr1").DataIndex("RemitAddr1")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillAddr2").Name("txtBillAddr2").DataIndex("RemitAddr2")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.Combo().ID("cboBillCountry").Name("cboBillCountry").HQProcedure("AP20200_pcCountryID")
                                        .HQColumnShow("CountryID,Descr").DisplayField("Descr").ValueField("CountryID").Width(150).DataIndex("RemitCountry")
                                        .HQHeightWidth(400, 300).MarginSpec("5 5 5 10")
                                        .LoadData()
                                        .Listeners(lst =>
                                        {
                                            lst.Change.Fn = "cboBillCountry_Change";
                                        })
                                         
                                        ,HQ.Combo().ID("cboBillState").Name("cboBillState").HQProcedure("AP20200_pcStateByCountry")
                                        .HQColumnShow("State,Descr").DisplayField("Descr").ValueField("State").DataIndex("RemitState")
                                        .Width(150).HQHeightWidth(400, 300).MarginSpec("5 5 5 10").AllowBlank(false)
                                        .HQParam(new StoreParameterCollection() 
                                            { 
                                                new StoreParameter() { Name = "@Country", Value = "App.cboBillCountry.getValue()", Mode = ParameterMode.Raw }                                                                                    
                                            })
                                        .LoadData()
                                        .Listeners(lst =>
                                            {
                                                lst.Change.Fn = "cboBillState_Change";
                                            })
                                            
                                        ,HQ.Combo().ID("cboBillCity").Name("cboBillCity").HQProcedure("AP20200_pcCityByCountryState")
                                        .HQColumnShow("City,Name").DisplayField("Name").ValueField("City").DataIndex("RemitCity")
                                        .Width(150).HQHeightWidth(400, 300).MarginSpec("5 5 5 10").AllowBlank(false)
                                        .HQParam(new StoreParameterCollection() 
                                            { 
                                                new StoreParameter() { Name = "@Country", Value = "App.cboBillCountry.getValue()", Mode = ParameterMode.Raw }
                                                ,new StoreParameter() { Name = "@State", Value = "App.cboBillState.getValue()", Mode = ParameterMode.Raw }                                                                                    
                                            })
                                        .LoadData()
                                        
                                        ,HQ.TextBox().ID("txtBillZip").Name("txtBillZip").DataIndex("RemitZip")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillPhone").Name("txtBillPhone").DataIndex("RemitPhone")
                                        .Width(150).MarginSpec("5 5 5 10")
                                        
                                        ,HQ.TextBox().ID("txtBillFax").Name("txtBillFax").DataIndex("RemitFax")
                                        .Width(150).MarginSpec("5 5 5 10")
                                            
                                        )
                          
                                )
                                
                                ,HQ.Button().ID("btnCopy").HQLangCode("Copy").Width(300)
                                .MarginSpec("5 5 5 5") .Listeners(lst => lst.Click.Fn = "btnCopy_Click")
                                    
                                 )
                           )
                )
                //End TabPanel     
              )
              
        )
    )
) 