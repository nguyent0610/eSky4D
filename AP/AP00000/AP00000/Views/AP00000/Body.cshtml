@using Ext.Net;
@using Ext.Net.MVC;
@using HQ.eSkyFramework;
@using HQ.eSkyFramework.HQControl;
@using AP00000;
@{
    Layout = null;
    var X = Html.X();
    var HQ = Html.HQ();
}

@(X.Viewport()
.Layout(LayoutType.Fit)
.Items(
    X.FormPanel()
    .ID("frmMain")
    .BodyPadding(0)
    .KeyMap(Util.SetupKeyMap())
    .TopBar(Util.SetupToolbar("Print", false, ""))
    .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
    .Layout(LayoutType.Fit)
    .Items(
        ////Thiet ke giao dien o day
        X.Panel().ID("Header").Layout(LayoutType.HBox)
        .Items(
            X.Container().Layout(LayoutType.VBox).MarginSpec("0 0 5 0")
            .Items(
                HQ.TextBox().ID("txtLastRefNbr").Name("txtLastRefNbr").HQLangCode("LastRefNbr")
                    .DataIndex("LastRefNbr").Width(400).MarginSpec("5 0 0 0").AllowBlank(false).MaxLength(10).EnforceMaxLength(true)
                , HQ.TextBox().ID("txtLastBatNbr").Name("txtLastBatNbr").HQLangCode("LastBatNbr")
                    .DataIndex("LastBatNbr").Width(400).MarginSpec("5 0 0 0").AllowBlank(false).MaxLength(10).EnforceMaxLength(true)
                , HQ.TextBox().ID("txtLastPaymentNbr").Name("txtLastPaymentNbr").HQLangCode("LastPaymentNbr")
                    .DataIndex("LastPaymentNbr").Width(400).MarginSpec("5 0 0 0").AllowBlank(false).MaxLength(10).EnforceMaxLength(true)
                , HQ.TextBox().ID("txtPreFixBat").Name("txtPreFixBat").HQLangCode("Prefix")
                    .DataIndex("PreFixBat").Width(400).MarginSpec("5 0 0 0").MaxLength(2).EnforceMaxLength(true)
                                  
                , HQ.Combo().ID("cboClassID").Name("cboClassID").HQLangCode("ClassID").HQProcedure("AP00000_pcClassID")
                .HQColumnShow("ClassID,Descr").DisplayField("ClassID").ValueField("ClassID")
                .DataIndex("ClassID").Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0").Editable(false)
                .LoadData()
                
                , HQ.Combo().ID("cboTermsID").Name("cboTermsID").HQLangCode("TermsID").HQProcedure("AP00000_pcTerms")
                .HQColumnShow("TermsID,Descr").DisplayField("TermsID").ValueField("TermsID")
                .DataIndex("terms").Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0").Editable(false)
                .LoadData()

                , HQ.Combo().ID("cboTranDescDef").Name("cboTranDescDef").HQLangCode("TranDescDef").HQProcedure("AP00000_pcTranDescDflt")
                .HQColumnShow("Code,Descr").DisplayField("Descr").ValueField("Code")
                .DataIndex("TranDescDflt").Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0").Editable(false)
                .HQParam(new StoreParameterCollection() 
                    { 
                        new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw }
                    })
                .LoadData()
                    
                , HQ.Combo().ID("cboBankAcct").Name("cboBankAcct").HQLangCode("BankAcct").HQProcedure("AP00000_pcBankAcctCA")
                .HQColumnShow("BankAcct,CashAcctName").DisplayField("BankAcct").ValueField("BankAcct")
                .DataIndex("DfltBankAcct").Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0").Editable(false)
                .HQParam(new StoreParameterCollection() 
                    { 
                        new StoreParameter() { Name = "@BranchID", Value = "HQ.cpnyID" , Mode = ParameterMode.Raw },
                    })
                .LoadData()
            )
        )
    )//giao dien
))
