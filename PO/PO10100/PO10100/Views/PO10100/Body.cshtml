@{
    Layout = null;
    var X = Html.X();
    var HQ = Html.HQ();
}
@using Ext.Net;
@using Ext.Net.MVC;
@using HQ.eSkyFramework;
@using HQ.eSkyFramework.HQControl;
@using PO10100;

@(Html.X().Viewport().Layout(LayoutType.Fit)
    .Items(
        X.FormPanel()
        .Layout(LayoutType.Anchor)
        .ID("frmMain")
        .TrackResetOnLoad(true)
        .DefaultAnchor("100%")
        .BodyPadding(10)
        .KeyMap(Util.SetupKeyMap())
        .TopBar(Util.SetupToolbar(tools: new AbstractComponent[]{
            X.FileUploadField()
            .ID("btnImport")
            .ButtonText("ImportTemplate")
            .ButtonOnly(true)
            .Icon(Icon.BookAdd)
            .Listeners(p=>{
                p.Change.Fn = "btnImport_Click";
              
            }),
                    
            X.Button()
            .ID("btnExport")
            .Text(Util.GetLang("ExportTemplate"))
            .Icon(Icon.ArrowTurnRight)
            .Listeners(p=>{
                p.Click.Fn = "btnExport_Click";
            })
        }))
        .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; })
        .Listeners(l =>
                    {
                        l.BoxReady.Handler = "firstLoad();";
                        l.FieldChange.Fn = "frmChange";
                    })
        .Items(
        // CAC PHAN TREN GIU NGUYEN, GIAO DIEN THIET KE O DAY 
          X.Panel().ID("pnlHeader").Layout(LayoutType.VBox).Border(false).AutoScroll(true)
            .Listeners(lst =>
                {
                    lst.Render.Handler = "HQ.common.control_render(this,'header')";
                    lst.Resize.Handler = "App.tabDetail.setAnchor(\"100% -\" + App.pnlHeader.getHeight());";
                })//focus header        
            .Items(
                    X.Container().Layout(LayoutType.HBox).Items(
                        HQ.Combo().ID("cboBranchID").Name("cboBranchID").MarginSpec("3 0 0 0").LabelWidth(110).InputWidth(150)
                                        .HQLangCode("BranchID").HQDBSys(false).HQProcedure("PO10100_pcBranchAllByUser")
                                        .HQColumnShow("BranchID,BranchName").ForceSelection(true)
                                        .HQValue("HQ.cpnyID", true)
                                        .DisplayField("BranchID")
                                        .ValueField("BranchID")
                                        .HQHeightWidth(400, 300)
                                        .HQParam(new StoreParameterCollection() {
                                                        new StoreParameter() { Name = "@UserID", Value ="HQ.userName", Mode = ParameterMode.Raw}
                                                })
                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                        .Listeners(lst =>
                                                {
                                                    lst.Change.Fn = "cboBranchID_Change";
                                                    lst.TriggerClick.Handler = "if (index == 0) { this.focus(true);this.clearValue(); }";

                                                })
                                        .LoadData()
                        , HQ.NumberField().DecimalPrecision(0).AllowDecimals(true).ReadOnly(true).ID("txtCA").Name("txtCA").HQLangCode("CAEA").LabelWidth(110).InputWidth(50).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("txtEA").Name("txtEA").HQLangCode("/").LabelSeparator("").LabelWidth(5).HideLabel(false).InputWidth(50).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("POFeeTot").Name("POFeeTot").HQLangCode("POFEETOT").LabelWidth(110).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.Combo().ID("POType").Name("POType").AllowBlank(false).MarginSpec("3 0 0 0").LabelWidth(130).InputWidth(110)
                                                .HQLangCode("POType").HQDBSys(false).HQProcedure("PO10100_pcPOType")
                                                .HQColumnShow("Descr").ForceSelection(true)
                                                .DisplayField("Descr")
                                                .ValueField("Code")
                                                .HQHeightWidth(400, 300)
                                                .HQParam(new StoreParameterCollection() {
                                                                new StoreParameter() { Name = "@LangID",Value = "HQ.langID", Mode = ParameterMode.Raw}
                                            })
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                .LoadData()

                        )
                    , X.Container().Layout(LayoutType.HBox).Items(
                        HQ.TextBox().ID("txtBranchName").Name("txtBranchName").ReadOnly(true).MaxLength(400).HQLangCode("BranchName").LabelWidth(110).InputWidth(375).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.NumberField().DecimalPrecision(0).AllowDecimals(true).ReadOnly(true).ID("RcptTotAmt").Name("RcptTotAmt").HQLangCode("TXBLAMT").LabelWidth(110).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.Combo().ID("BlktPONbr").Name("BlktPONbr").MarginSpec("3 0 0 0").LabelWidth(130).InputWidth(110)
                                                    .HQLangCode("BlktPONbr").HQDBSys(false).HQProcedure("PO10100_pcBlankitPO")
                                                    .HQColumnShow("POnbr,POdate,vendid").ForceSelection(true)
                                                    .DisplayField("POnbr")
                                                    .ValueField("POnbr")
                                                    .HQHeightWidth(400, 300)
                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                    .Listeners(lst =>
                                                        {
                                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        })
                                                    .LoadData()

                        )
                        , X.Container().Layout(LayoutType.HBox).Items(
                        HQ.Combo().ID("cboPONbr").Name("cboPONbr").MarginSpec("3 0 0 0").LabelWidth(110).InputWidth(150).HQAutoLoad(false)
                                                .HQLangCode("PONbr").HQDBSys(false).HQProcedure("PO10100_pcPONbr_Branch_All")
                                                .HQColumnShow("PONbr,VendID,PODate,Status,POAmt")
                                                .DisplayField("PONbr")
                                                .ValueField("PONbr")
                                                .HQHeightWidth(400, 500)
                                                .HQParam(new StoreParameterCollection() {
                                                                    new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                                    ,new StoreParameter() { Name = "@UserID",  Value ="HQ.userName", Mode = ParameterMode.Raw}
                                                                    ,new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}											                 
                                                })
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .Listeners(lst =>
                                                    {
                                                        lst.Change.Fn = "cboPONbr_Change";
                                                        lst.Select.Fn = "cboPONbr_Select";
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.focus(true); this.clearValue();}";
                                                    })
                                                .LoadData()
                        , HQ.Combo().ID("cboStatus").DataIndex("Status").Name("Status").MarginSpec("3 0 0 0").LabelWidth(110).InputWidth(110)
                                                .HQLangCode("Status").HQDBSys(false).HQProcedure("PO10100_pcStatus").ForceSelection(false)
                                                .HQColumnShow("Descr").ReadOnly(true)
                                                .DisplayField("Descr")
                                                .ValueField("Code")
                                                .HQHeightWidth(400, 400)
                                                .HQParam(new StoreParameterCollection() {
                                                                    new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                                    ,new StoreParameter() { Name = "@UserID", Value = "HQ.userName", Mode = ParameterMode.Raw}                                                               
                                                })
                                                .Listeners(lst => { lst.Change.Fn = "cboStatus_Change"; })
                                                .LoadData()

                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("DISCOUNT").Name("DISCOUNT").HQLangCode("DISCOUNT").LabelWidth(110).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.TextBox().ID("ReqNbr").Name("ReqNbr").MaxLength(20).HQLangCode("ReqNbr").LabelWidth(130).InputWidth(110).MarginSpec("3 0 0 0").HQControlFocus("")
                        )
                        , X.Container().Layout(LayoutType.HBox).Items(
                        HQ.Combo().ID("cboVendID").AllowBlank(false).DataIndex("VendID").Name("VendID").MarginSpec("3 0 0 0").LabelWidth(110).InputWidth(150).ForceSelection(true)
                                                .HQLangCode("VendID").HQDBSys(false).HQProcedure("PO10100_pcvendor_active")
                                                .HQColumnShow("VendID,name,Address")
                                                .DisplayField("VendID")
                                                .ValueField("VendID")
                                                .HQHeightWidth(400, 300)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(); this.clearValue();}";
                                                        lst.Change.Fn = "cboVendID_Change";
                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                    })
                                                .LoadData()
                        , HQ.Combo().ID("cboHandle").Name("Handle").MarginSpec("3 0 0 0").LabelWidth(110).InputWidth(110)
                                                .HQLangCode("Handle").HQDBSys(false).HQProcedure("PO10100_pcHandle")
                                                .HQColumnShow("Descr")
                                                .DisplayField("Descr")
                                                .ValueField("ToStatus")
                                                .HQValue("App.cboStatus.getValue()", true)
                                                .HQHeightWidth(400, 300).ForceSelection(true)
                                                .HQParam(new StoreParameterCollection() {
                                                                    new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                                    ,new StoreParameter() { Name = "@UserID", Value = "HQ.userName", Mode = ParameterMode.Raw}                                                             
                                                                    ,new StoreParameter() { Name = "@Status", Value = "App.cboStatus.getValue()", Mode = ParameterMode.Raw}
                                                })
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                    })
                                                .LoadData()
                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("TAX").Name("TAX").HQLangCode("TAX").LabelWidth(110).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("EXTVOL").Name("EXTVOL").HQLangCode("EXTVOL").LabelWidth(130).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        )
                        , X.Container().Layout(LayoutType.HBox).Items(
                        HQ.DateField().ID("dtPODate").Name("PODate").AllowBlank(false).HQLangCode("PODate").LabelWidth(110).InputWidth(150).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        , HQ.Button().ID("btnClosePO").HQLangCode("CPO").MarginSpec("3 0 0 115").Width(110)
                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("POAmt").Name("POAmt").HQLangCode("TOTAMT").LabelWidth(110).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")

                        , HQ.NumberField().DecimalPrecision(0).ReadOnly(true).ID("EXTWEIGHT").Name("EXTWEIGHT").HQLangCode("EXTWEIGHT").LabelWidth(130).InputWidth(110).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                        )
                    )//Header
                    , X.Container().MarginSpec("5 0 0 0")

                    , X.TabPanel()
                        .Layout(LayoutType.Fit)
                        .Anchor("100% -120")
                        .ID("tabDetail")
                        .Items(
                                X.Panel()
                                .ID("tabLineItem")
                                .Layout(LayoutType.Fit)
                                .Title("LINRITEM")
                                .Padding(5)
                                .Items(

                                       Html.X().GridPanel()
                                        .Flex(1)
                                        .AutoScroll(true)
                                        .SortableColumns(false)
                                        .ID("grdDetail")
                                        .SelectionMemory(false)
                                        .Listeners(lst => lst.Render.Handler = "HQ.common.control_render(this,'grdDetail')")//focus grdDetail                                     
                                        .View(X.GridView().TrackOver(false))
                                        .Store(
                                                X.Store().ID("stoPO10100_pgDetail").AutoLoad(false)
                                                .PageSize(50)
                                                .Model(Util.GenerateModel(typeof(PO10100_pgDetail_Result), "mdlPO10100_pgDetailModel", "PurchaseType,InvtID", true))
                                                .Listeners(l =>
                                                    {
                                                        l.Load.Fn = "loadDataDetail";
                                                    })
                                                .ServerProxy(
                                                        X.AjaxProxy()
                                                        .Url(Url.Action("GetPO10100_pgDetail", "PO10100"))

                                                    )
                                                .Parameters(ps =>
                                                                {
                                                                    ps.Add(new StoreParameter("branchID", "App.cboBranchID.getValue()", ParameterMode.Raw));
                                                                    ps.Add(new StoreParameter("pONbr", "App.cboPONbr.getValue()", ParameterMode.Raw));
                                                                })
                                                      )
                                        .ColumnModel(
                                        Html.X().RowNumbererColumn()
                                        , Html.X().Column().Text(Util.GetLang("PurchaseType")).DataIndex("PurchaseType").Renderer("renderPurchaseType")
                                                                            .Editor(HQ.Combo().ID("PurchaseType").Name("PurchaseType").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcPurchaseType").ForceSelection(true)
                                                                                    .HQColumnShow("Descr")
                                                                                    .DisplayField("Descr")
                                                                                    .ValueField("Code")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().Column().Text(Util.GetLang("InvtID")).DataIndex("InvtID")
                                                                            .Editor(HQ.Combo().ID("cboInvtID").Name("InvtID").HideLabel(true).LabelWidth(0).ForceSelection(true)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcInventoryActive")
                                                                                    .HQColumnShow("InvtID,Descr")
                                                                                    .DisplayField("InvtID")
                                                                                    .ValueField("InvtID")
                                                                                    .HQHeightWidth(400, 300).Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.Change.Fn = "cboGInvtID_Change"; lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().Column().Text(Util.GetLang("TranDesc")).DataIndex("TranDesc").Width(150).Editor(Html.X().TextField().MaxLength(100100))
                                        , Html.X().Column().Text(Util.GetLang("SiteID")).DataIndex("SiteID")
                                                                            .Editor(HQ.Combo().ID("cboSiteID").Name("SiteID").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcSiteAll").ForceSelection(true)
                                                                                    .HQColumnShow("SiteID")
                                                                                    .DisplayField("SiteID")
                                                                                    .ValueField("SiteID")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}											                          
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text("QtyOrd").DataIndex("QtyOrd").Width(150).Format("0,000,000").Editor(Html.X().NumberField().DecimalPrecision(0))

                                        , Html.X().Column().Text(Util.GetLang("PurchUnit")).DataIndex("PurchUnit")
                                                                            .Editor(HQ.Combo().ID("cboPurchUnit").Name("PurchUnit").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcINUnit_Invt_Class_From_To").HQValue("purUnit", true)
                                                                                    .HQColumnShow("FromUnit").ForceSelection(true)
                                                                                    .DisplayField("FromUnit")
                                                                                    .ValueField("FromUnit")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@ClassID", Value = "strClassID", Mode = ParameterMode.Raw}
                                                                                ,new StoreParameter() { Name = "@StkUnit", Value = "strStkUnit", Mode = ParameterMode.Raw}
                                                                                ,new StoreParameter() { Name = "@InvtID", Value = "strInvtID", Mode = ParameterMode.Raw}											                          
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("UnitCost")).DataIndex("UnitCost").Width(150).Format("0,000,000").Editor(Html.X().NumberField().DecimalPrecision(0))
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("DiscPct")).DataIndex("DiscPct").Width(150).Format("0,000,000").Editor(Html.X().NumberField().DecimalPrecision(0))
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("DiscAmt")).DataIndex("DiscAmt").Width(150).Format("0,000,000").Editor(Html.X().NumberField().DecimalPrecision(0))
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("ExtCost")).DataIndex("ExtCost").Width(150).Format("0,000,000").Editor(Html.X().NumberField().DecimalPrecision(0))
                                        , Html.X().Column().Text(Util.GetLang("TaxCat")).DataIndex("TaxCat").Width(0)
                                                                            .Editor(HQ.Combo().ForceSelection(true).ID("TaxCat").Name("TaxCat").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcTaxCat")
                                                                                    .HQColumnShow("CatID").ForceSelection(true)
                                                                                    .DisplayField("CatID")
                                                                                    .ValueField("CatID")
                                                                                    .HQHeightWidth(400, 300).Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().Column().Text(Util.GetLang("TaxID")).DataIndex("TaxID").Width(0)
                                                                            .Editor(HQ.Combo().ID("cboTaxID").Name("TaxID").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pdAP_VenDorTaxes").HQAutoLoad(false)
                                                                                    .HQColumnShow("taxid").MultiSelect(true)
                                                                                    .DisplayField("taxid").ForceSelection(true)
                                                                                    .ValueField("taxid")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@VendID", Value = "App.cboVendID.getValue()", Mode = ParameterMode.Raw}
                                                                                ,new StoreParameter() { Name = "@OrdFromId", Value = "", Mode = ParameterMode.Value}
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("POFee")).Hidden(true).DataIndex("POFee").Width(150).Format("0,000,000").Editor(HQ.NumberField())
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("UnitWeight")).DataIndex("UnitWeight").Width(150).Format("0,000,000").Editor(HQ.NumberField().DecimalPrecision(0))
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("ExtWeight")).DataIndex("ExtWeight").Width(150).Format("0,000,000")//.Editor(HQ.NumberField())
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("UnitVolume")).DataIndex("UnitVolume").Width(150).Format("0,000,000").Editor(HQ.NumberField().DecimalPrecision(0))
                                        , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("ExtVolume")).DataIndex("ExtVolume").Width(150).Format("0,000,000")//.Editor(HQ.NumberField())

                                        , Html.X().DateColumn().Text(Util.GetLang("ReqdDate")).DataIndex("ReqdDate").Width(150).Editor(Html.X().DateField())
                                        , Html.X().DateColumn().Text(Util.GetLang("PromDate")).DataIndex("PromDate").Width(150).Editor(Html.X().DateField())
                                        , Html.X().Column().Text(Util.GetLang("VouchStage")).DataIndex("VouchStage").Renderer("renderVouchStage")
                                                                            .Editor(HQ.Combo().ID("VouchStage").Name("VouchStage").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcVouchStage")
                                                                                    .HQColumnShow("Descr").ForceSelection(true)
                                                                                    .DisplayField("Descr")
                                                                                    .ValueField("Code")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )
                                        , Html.X().Column().Text(Util.GetLang("RcptStage")).DataIndex("RcptStage").Renderer("renderRcptStage")
                                                                            .Editor(HQ.Combo().ID("RcptStage").Name("RcptStage").HideLabel(true).LabelWidth(0)
                                                                                    .HQDBSys(false).HQProcedure("PO10100_pcRcptStage")
                                                                                    .HQColumnShow("Descr").ForceSelection(true)
                                                                                    .DisplayField("Descr")
                                                                                    .ValueField("Code")
                                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                            })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; })
                                                                                    .LoadData()
                                                                                    )


                                    , Html.X().CommandColumn().Width(70).Commands(Html.X().GridCommand().Text(Util.GetLang("Reject"))
                                                                            .ToolTip(t =>
                                                                            {
                                                                                t.Text = Util.GetLang("Rejectrowchanges");
                                                                            })
                                                                            .CommandName("reject")
                                                                            .Icon(Icon.ArrowUndo)
                                                                            )
                                                                            .PrepareToolbar(t =>
                                                                            {
                                                                                t.Handler = "toolbar.items.get(0).setVisible(record.dirty);";
                                                                            })
                                                                            .Listeners(l =>
                                                                            {
                                                                                l.Command.Handler = "grdPO_Detail_Reject(record);";
                                                                            })
                                                                            )
                                                        .SelectionModel(Html.X().RowSelectionModel().ID("slmPO_Detail").Mode(SelectionMode.Single))
                                                        .Plugins(
                                                            X.CellEditing()
                                                            .ClicksToEdit(1)
                                                            .Listeners(ls =>
                                                            {
                                                                ls.BeforeEdit.Fn = "grdPO_Detail_BeforeEdit";
                                                                ls.Edit.Fn = "grdPO_Detail_Edit";
                                                                ls.ValidateEdit.Fn = "grdPO_Detail_ValidateEdit";
                                                             
                                                            })
                                                        )
                                                        .BottomBar(
                                                                X.PagingToolbar()
                                                                .Items(
                                                                    X.Label("Page size:"),
                                                                    X.ToolbarSpacer(10),
                                                                    X.ComboBox()
                                                                    .Width(80)
                                                                    .Items("1", "2", "10", "20", "30", "50")
                                                                    .SelectedItems("50")
                                                                    .Listeners(l =>
                                                                        {
                                                                            l.Select.Fn = "HQ.grid.onPageSelect";
                                                                        })
                                                                )
                                                                .Plugins(X.ProgressBarPager().ID("pagDetail"))
                                                            )
                            )//tab tabLineItem
                            , X.Panel()
                            .ID("tabTax").AutoScroll(true)
                            .Layout(LayoutType.VBox)
                            .LayoutConfig(config => { config.Add(new VBoxLayoutConfig() { Align = VBoxAlign.Stretch }); })
                            .Title("TAX")
                            .Padding(5)
                            .Items(

                                Html.X().GridPanel()
                                               .Flex(1)
                                                .ID("grdTaxTrans")
                                                .StoreID("stoPO10100_pgLoadTaxTrans")
                                                .ColumnModel(
                                                                Html.X().RowNumbererColumn()
                                                                , Html.X().Column().Text(Util.GetLang("LineRef")).DataIndex("LineRef").Width(150)
                                                                , Html.X().Column().Text(Util.GetLang("TaxID")).DataIndex("TaxID").Width(150)
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TxblAmt")).DataIndex("TxblAmt").Width(150).Format("0,000,000")
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TaxAmt")).DataIndex("TaxAmt").Width(150).Format("0,000,000")
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TaxRate")).DataIndex("TaxRate").Width(150).Format("0,000,000")
                                                                , Html.X().Column().Text(Util.GetLang("TaxLevel")).DataIndex("TaxLevel").Width(150)
                                                            )

                                , X.BoxSplitter()
                                , Html.X().GridPanel()
                                               .Flex(1)
                                                .ID("grdTaxDoc")
                                                .Store(
                                                          Html.X().Store()
                                                              .ID("stoPO10100_LoadTaxDoc")
                                                              .Model(
                                                                  Util.GenerateModel(typeof(PO10100_pgLoadTaxTrans_Result), "mdlPO10100_pgLoadTaxTransDoc", "")
                                                              )
                                                      )
                                                .ColumnModel(
                                                                Html.X().RowNumbererColumn()
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TaxRate")).DataIndex("TaxRate").Width(150).Format("0,000,000")
                                                                , Html.X().Column().Text(Util.GetLang("TaxID")).DataIndex("TaxID").Width(150)
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TaxAmt")).DataIndex("TaxAmt").Width(150).Format("0,000,000")
                                                                , Html.X().NumberColumn().Align(Alignment.Right).Text(Util.GetLang("TxblAmt")).DataIndex("TxblAmt").Width(150).Format("0,000,000")

                                                            )


                                )//tabTax                                                                                                         
                            , X.Panel()
                            .ID("tabThongTinGiaoHang")
                            .Layout(LayoutType.VBox).AutoScroll(true)
                            .Anchor("100%")
                            .Title("SHIPINFO")
                            .Padding(5)
                            .Items(
                            X.Container().Layout(LayoutType.HBox).Items(
                                    HQ.Label().HQLangCode("ADDRTYPE").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("DISTADDR").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("SITEID").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("CUSTID").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("CUSTADDR").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("VENDOR").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("VENDADDR").Width(110).MarginSpec("3 0 0 5")
                                    , HQ.Label().HQLangCode("OTHERADDR").Width(110).MarginSpec("3 0 0 5")
                            )
                            , X.Container().Layout(LayoutType.HBox).Items(
                                HQ.Combo().ID("cboShiptoType").Name("ShiptoType").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true)
                                                                .HQValue("D", false)
                                                                .HQLangCode("AddrType").HQDBSys(false).HQProcedure("PO10100_pcAddrType")
                                                                .HQColumnShow("Descr")
                                                                .DisplayField("Descr")
                                                                .ValueField("Code")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
											                                  
                                                            })
                                                                .Listeners(lst => { lst.Change.Fn = "cboShiptoType_Change"; })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()
                                , HQ.Combo().ID("cboDistAddr").AllowBlank(false).Name("ShipDistAddrID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true).HQAutoLoad(false)
                                                                .HQLangCode("ShipDistAddrID").HQDBSys(false).HQProcedure("PO10100_pcDistAddr")
                                                                .HQColumnShow("AddrID,Name,Addr1,Addr2")
                                                                .DisplayField("AddrID")
                                                                .ValueField("AddrID")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}
											                                  
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                        lst.Change.Fn = "cboDistAddr_Change";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShipSiteID").Name("ShipSiteID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true).HQAutoLoad(false)
                                                                .HQLangCode("ShipSiteID").HQDBSys(false).HQProcedure("PO10100_pcSiteAll").DataIndex("ShipSiteID")
                                                                .HQColumnShow("SiteID,Name")
                                                                .DisplayField("SiteID")
                                                                .ValueField("SiteID")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                 new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}											                                    
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                    .Listeners(lst => { lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}"; lst.Change.Fn = "cboShipSiteID_Change"; })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShipCustID").Name("ShipCustID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true).HQAutoLoad(false)
                                                                .HQLangCode("ShipCustID").HQDBSys(false).HQProcedure("PO10100_pcCustomerActive").DataIndex("ShipCustID")
                                                                .HQColumnShow("CustID,Name,Addr1,Addr2")
                                                                .DisplayField("CustID")
                                                                .ValueField("CustID")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}											                                  
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                                        lst.Change.Fn = "cboShipCustID_Change";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShiptoID").Name("ShiptoID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true).HQAutoLoad(false)
                                                                .HQLangCode("ShiptoID").HQDBSys(false).HQProcedure("PO10100_pcShipToId")
                                                                .HQColumnShow("ShipToId,Descr,SOName")
                                                                .DisplayField("ShipToId")
                                                                .ValueField("ShipToId")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@CustId", Value = "App.cboShipCustID.getValue()", Mode = ParameterMode.Raw}
                                                                                ,new StoreParameter() { Name = "@BranchID", Value = "App.cboBranchID.getValue()", Mode = ParameterMode.Raw}											                                    
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                        lst.Change.Fn = "cboShiptoID_Change";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShipVendID").Name("ShipVendID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true)
                                                                .HQLangCode("ShipVendID").HQDBSys(false).HQProcedure("PO10100_pcvendor")
                                                                .HQColumnShow("VendID,name,Address")
                                                                .DisplayField("VendID")
                                                                .ValueField("VendID")
                                                                .HQHeightWidth(400, 300)
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                    .Listeners(lst =>
                                                                        {
                                                                            lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                            lst.Change.Fn = "cboShipVendID_Change";
                                                                            lst.Focus.Handler = "this.forceSelection = true;";
                                                                        })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShipVendAddrID").Name("ShipVendAddrID").MarginSpec("3 0 0 5").HideLabel(true).Width(110)
                                                                .HQLangCode("ShipVendAddrID").HQDBSys(false).HQProcedure("PO10100_pcDefID").ForceSelection(true)
                                                                .HQColumnShow("vendid,OrdFromId")
                                                                .DisplayField("vendid")
                                                                .ValueField("vendid")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@VendID", Value = "App.cboShipVendID.getValue()", Mode = ParameterMode.Raw}
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                        lst.Change.Fn = "cboShipVendAddrID_Change";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()
                                , HQ.Combo().ID("cboShipAddrID").Name("ShipAddrID").MarginSpec("3 0 0 5").HideLabel(true).Width(110).ForceSelection(true)
                                                                .HQLangCode("ShipAddrID").HQDBSys(false).HQProcedure("PO10100_pcAddress")
                                                                .HQColumnShow("AddrID,Name,Addr1,Adrr2")
                                                                .DisplayField("AddrID")
                                                                .ValueField("AddrID")
                                                                .HQHeightWidth(400, 300)
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) { this.focus(true);this.clearValue();}";
                                                                    lst.Change.Fn = "cboShipAddrID_Change";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                                .LoadData()
                            )
                            , X.Container().Layout(LayoutType.HBox).MarginSpec("5 0 0 0").Items(
                                X.Container().Layout(LayoutType.VBox).Items(
                                    HQ.TextBox().ID("txtShipName").Name("ShipName").DataIndex("ShipName").MaxLength(250).HQLangCode("NAME").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.TextBox().ID("txtShipAttn").Name("ShipAttn").DataIndex("ShipAttn").MaxLength(250).HQLangCode("ATTN").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.TextBox().ID("txtShipAddr1").Name("ShipAddr1").DataIndex("ShipAddr1").MaxLength(250).HQLangCode("ADDRESS1").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.TextBox().ID("txtShipAddr2").Name("ShipAddr2").DataIndex("ShipAddr2").MaxLength(250).HQLangCode("ADDRESS2").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.Combo().ID("cboShipCity").Name("ShipCity").MarginSpec("3 0 0 0").ForceSelection(true)
                                                            .HQLangCode("City").HQDBSys(false).HQProcedure("PO10100_pcCityAll")
                                                            .HQColumnShow("City,Name")
                                                            .DisplayField("Name")
                                                            .ValueField("City")
                                                            .HQHeightWidth(400, 300)
                                                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                            .Listeners(lst =>
                                                            {
                                                                lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                lst.Focus.Handler = "this.forceSelection = true;";
                                                            })
                                                            .LoadData()
                                    , HQ.Combo().ID("cboShipState").Name("ShipState").MarginSpec("3 0 0 0").ForceSelection(true)
                                                            .HQLangCode("State").HQDBSys(false).HQProcedure("PO10100_pcStateAll")
                                                            .HQColumnShow("State,Descr")
                                                            .DisplayField("Descr")
                                                            .ValueField("State")
                                                            .HQHeightWidth(400, 300)
                                                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                            .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                            .LoadData()
                                    , HQ.TextBox().ID("txtShipZip").Name("ShipZip").MaxLength(10).HQLangCode("ZIP").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.Combo().ID("cboShipCountry").Name("ShipCountry").MarginSpec("3 0 0 0").ForceSelection(true)
                                                            .HQLangCode("COUNTRY").HQDBSys(false).HQProcedure("PO10100_pcCountryAll")
                                                            .HQColumnShow("CountryID,Descr")
                                                            .DisplayField("Descr")
                                                            .ValueField("CountryID")
                                                            .HQHeightWidth(400, 300)
                                                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                            .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                            .LoadData()
                                )
                                , X.Container().Layout(LayoutType.VBox).Items(
                                    HQ.TextBox().ID("txtShipPhone").Name("ShipPhone").MaxLength(30).HQLangCode("PHONE").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.TextBox().ID("txtShipFax").Name("ShipFax").MaxLength(30).HQLangCode("FAX").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                    , HQ.TextBox().ID("txtShipEmail").Name("ShipEmail").MaxLength(40).HQLangCode("EMAILADDR").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                        , HQ.Combo().ID("cboShipVia").Name("ShipVia").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                .HQLangCode("SHIPVIA").HQDBSys(false).HQProcedure("PO10100_pcShipViaID")
                                                                .HQColumnShow("ShipViaID,Descr")
                                                                .DisplayField("ShipViaID")
                                                                .ValueField("ShipViaID")
                                                                .HQHeightWidth(400, 300)
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                                .LoadData()

                                    , HQ.DateField().ID("txtBlktExprDate").Name("BlktExprDate").HQLangCode("BLANKET").Width(200).AllowBlank(false).MarginSpec("3 0 0 0").HQControlFocus("")
                                        , HQ.Combo().ID("cboRcptStage").Name("RcptStage").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                .HQLangCode("RECPTSTATUS").HQDBSys(false).HQProcedure("PO10100_pcRcptStage")
                                                                .HQColumnShow("Descr")
                                                                .DisplayField("Descr")
                                                                .ValueField("Code")
                                                                .HQHeightWidth(400, 300)
                                                                .HQParam(new StoreParameterCollection() {
                                                                                new StoreParameter() { Name = "@LangID", Value = "HQ.langID", Mode = ParameterMode.Raw}
                                                            })
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                                .LoadData()
                                         , HQ.Combo().ID("cboTerms").Name("Terms").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                .HQLangCode("Terms").HQDBSys(false).HQProcedure("PO10100_pcterms")
                                                                .HQColumnShow("TermsID,Descr")
                                                                .DisplayField("TermsID")
                                                                .ValueField("TermsID")
                                                                .HQHeightWidth(400, 300)
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                    lst.Focus.Handler = "this.forceSelection = true;";
                                                                })
                                                                .LoadData()
                                        , HQ.Combo().ID("cboBuyer").Name("Buyer").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                .HQLangCode("Buyer").HQDBSys(false).HQProcedure("PO10100_pcBuyerAll")
                                                                .HQColumnShow("Buyer,Name")
                                                                .DisplayField("Buyer")
                                                                .ValueField("Buyer")
                                                                .HQHeightWidth(400, 300)
                                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                .Listeners(lst =>
                                                                    {
                                                                        lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                        lst.Focus.Handler = "this.forceSelection = true;";
                                                                    })
                                                                .LoadData()


                                )
                            )
                            )//tabThongTinGiaoHang
                            , X.Panel()
                            .ID("tabThongTinNhaCungCap")
                            .Layout(LayoutType.Fit)
                            .AnchorVertical("100%").AutoScroll(true)
                            .Title("VENDINFO")
                            .Padding(5)
                            .Items(
                                    X.Container().Layout(LayoutType.HBox).MarginSpec("5 0 0 0").Items(
                                        X.Container().Layout(LayoutType.VBox).Items(

                                            HQ.Combo().ID("cboVendAddrID").Name("VendAddrID").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                    .HQLangCode("VendAddrID").HQDBSys(false).HQProcedure("PO10100_pcDefID")
                                                                    .HQColumnShow("VendID,Name,Addr1")
                                                                    .DisplayField("Name")
                                                                    .ValueField("VendID")
                                                                    .HQHeightWidth(400, 300)
                                                                    .HQParam(new StoreParameterCollection() {
                                                                                        new StoreParameter() { Name = "@VendID", Value = "App.cboVendID.getValue()", Mode = ParameterMode.Raw}
                                                                    })
                                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                    .Listeners(lst =>
                                                                        {
                                                                            lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                            lst.Change.Fn = "cboVendAddrID_Change";
                                                                            lst.Focus.Handler = "this.forceSelection = true;";
                                                                        })
                                                                    .LoadData()
                                            , HQ.TextBox().ID("txtVendName").Name("VendName").MaxLength(250).HQLangCode("NAME").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.TextBox().ID("txtVendAttn").Name("VendAttn").MaxLength(250).HQLangCode("ATTN").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.TextBox().ID("txtVendAddr1").Name("VendAddr1").MaxLength(250).HQLangCode("ADDRESS1").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.TextBox().ID("txtVendAddr2").Name("VendAddr2").MaxLength(250).HQLangCode("ADDRESS2").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.Combo().ID("cboVendCity").Name("VendCity").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                        .HQLangCode("City").HQDBSys(false).HQProcedure("PO10100_pcCityAll")
                                                                        .HQColumnShow("City,Name")
                                                                        .DisplayField("Name")
                                                                        .ValueField("City")
                                                                        .HQHeightWidth(400, 300)
                                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                        .Listeners(lst =>
                                                                            {
                                                                                lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                                lst.Focus.Handler = "this.forceSelection = true;";
                                                                            })
                                                                        .LoadData()
                                                , HQ.Combo().ID("cboVendState").Name("VendState").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                        .HQLangCode("State").HQDBSys(false).HQProcedure("PO10100_pcStateAll")
                                                                        .HQColumnShow("State,Descr")
                                                                        .DisplayField("Descr")
                                                                        .ValueField("State")
                                                                        .HQHeightWidth(400, 300)
                                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                        .Listeners(lst =>
                                                                            {
                                                                                lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                                lst.Focus.Handler = "this.forceSelection = true;";
                                                                            })
                                                                        .LoadData()
                                                , HQ.TextBox().ID("txtVendZip").Name("VendZip").MaxLength(10).HQLangCode("ZIP").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                                , HQ.Combo().ID("cboVendCountry").Name("VendCountry").MarginSpec("3 0 0 0").ForceSelection(true)
                                                                        .HQLangCode("COUNTRY").HQDBSys(false).HQProcedure("PO10100_pcCountryAll")
                                                                        .HQColumnShow("CountryID,Descr")
                                                                        .DisplayField("Descr")
                                                                        .ValueField("CountryID")
                                                                        .HQHeightWidth(400, 300)
                                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                                        .Listeners(lst =>
                                                                            {
                                                                                lst.TriggerClick.Handler = "if (index == 0) {this.focus(true); this.clearValue();}";
                                                                                lst.Focus.Handler = "this.forceSelection = true;";
                                                                            })
                                                                        .LoadData()
                                        )
                                        , X.Container().Layout(LayoutType.VBox).Items(
                                            HQ.TextBox().ID("txtVendPhone").Name("VendPhone").MaxLength(30).HQLangCode("PHONE").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.TextBox().ID("txtVendFax").Name("VendFax").MaxLength(30).HQLangCode("FAX").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")
                                            , HQ.TextBox().ID("txtVendEmail").Name("VendEmail").MaxLength(40).HQLangCode("EMAILADDR").Width(400).MarginSpec("3 0 0 0").HQControlFocus("")


                                        )
                                    )
                             )  //tabThongTinNhaCungCap     

                        )
                )
        )
)
