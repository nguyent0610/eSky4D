
@using Ext.Net;
@using Ext.Net.MVC;
@using eBiz4DWebFrame;
@using eBiz4DWebFrame.HQControl;
@using IN20500;

@model System.Collections.IEnumerable
@{
    Layout = null;
    var X = Html.X();
    var HQ = Html.HQ();
    var acc = Session["IN20500"] as AccessRight;
}
<link href="~/Content/ComboXTemplate.css" rel="stylesheet" />
<script src="~/Scripts/common.js"></script>
<script src='@Url.Content("Scripts/Screen/IN20500.js")' type="text/javascript"></script>
@*<script src='@Url.Content("Scripts/Screen/uxflash.js")' type="text/javascript"></script>
<script src='@Url.Content("Scripts/Screen/uxflex.js")' type="text/javascript"></script>
<script src='@Url.Content("Scripts/Screen/uxmedia-ie.js")' type="text/javascript"></script>
<script src='@Url.Content("Scripts/Screen/uxmedia.js")' type="text/javascript"></script>
<script src='@Url.Content("Scripts/Screen/uxvismode.js")' type="text/javascript"></script>*@


<style type="text/css"> @*Thuoc tinh hover tren grid *@
    .x-grid-row-over .x-grid-cell-inner {
        font-weight : bold;
    }
</style>

@*<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "https://www.youtube.com/watch?v=IvohXgIKTgU",
        image: "http://example.com/uploads/myPoster.jpg",
        width: 640,
        height: 360
    });
</script>*@
<script>
    var isAllValid = function (items) {
        if (items != undefined) {
            for (var i = 0; i < items.length; i++) {
                if (items[i]["CpnyID"] == undefined)
                    continue;
                if (items[i]["CpnyID"] == "")
                    continue;

                if (items[i]["CpnyID"].trim() == "") {
                    callMessage(15, '@Util.GetLang("CpnyID")', null);
                return false;
            }


        }
        return true;
    }
    else {
        return true;
    }
    };







</script>
<script>
    var isUpdate = strToBool('@acc.Update.ToString().ToLower()');
    var isInsert = strToBool('@acc.Insert.ToString().ToLower()');
    var isDelete = strToBool('@acc.Delete.ToString().ToLower()');
</script>

@(Html.X().ResourceManager().Theme((Theme)Enum.Parse(typeof(Theme), Current.Theme.PassNull() == "" ? "Gray" : Current.Theme.PassNull())))


@(Html.X().Store().ID("storeFormBig").AutoLoad(false)
        .Model(Util.GenerateModel(typeof(IN_Inventory), "IN_InventoryModel", "InvtID",false,"StkItem"))
        .Proxy(
            X.AjaxProxy()
            .Url(Url.Action("GetInventoryClass", "IN20500"))
            .ActionMethods(action =>
            {
                action.Read = HttpMethod.POST;
            })
            .Reader(X.JsonReader().Root("data").TotalProperty("totaldata"))
        )
        .Parameters(ps =>
        {
            ps.Add(new StoreParameter("InvtID", "App.cboInvtID.value", ParameterMode.Raw));
        })
        .Listeners(p => p.Load.Handler = "loadDataAutoHeaderBig()")
  )




@(Html.X().Store().ID("storeFormSmall").AutoLoad(false)
        //.Model(Util.GenerateModel(typeof(IN_ProductClass), "IN_ProductClassModel", "ClassID",false,"DfltStkItem"))
        .Model(
            X.Model()
            .Name("IN_ProductClassModel")
            .IDProperty("ClassID")
            .Fields(
                X.ModelField().Name("ClassID").Type(ModelFieldType.String)
                ,X.ModelField().Name("Public").Type(ModelFieldType.Boolean)
                ,X.ModelField().Name("StkItem").Type(ModelFieldType.Boolean)
                ,X.ModelField().Name("InvtType").Type(ModelFieldType.String)
                ,X.ModelField().Name("Source").Type(ModelFieldType.String)
                ,X.ModelField().Name("ValMthd").Type(ModelFieldType.String)
                ,X.ModelField().Name("LotSerTrack").Type(ModelFieldType.String)
                ,X.ModelField().Name("Buyer").Type(ModelFieldType.String)
                ,X.ModelField().Name("StkUnit").Type(ModelFieldType.String)
                ,X.ModelField().Name("DfltPOUnit").Type(ModelFieldType.String)
                ,X.ModelField().Name("DfltSOUnit").Type(ModelFieldType.String)
                ,X.ModelField().Name("MaterialType").Type(ModelFieldType.String)
                ,X.ModelField().Name("TaxCat").Type(ModelFieldType.String)
                ,X.ModelField().Name("SerAssign").Type(ModelFieldType.String)
                ,X.ModelField().Name("LotSerIssMthd").Type(ModelFieldType.String)
                ,X.ModelField().Name("ShelfLife").Type(ModelFieldType.Int)
                ,X.ModelField().Name("WarrantyDays").Type(ModelFieldType.Int)
                ,X.ModelField().Name("LotSerFxdTyp").Type(ModelFieldType.String)
                ,X.ModelField().Name("LotSerFxdLen").Type(ModelFieldType.Int)
                ,X.ModelField().Name("LotSerFxdVal").Type(ModelFieldType.String)
                ,X.ModelField().Name("LotSerNumLen").Type(ModelFieldType.Int)
                ,X.ModelField().Name("LotSerNumVal").Type(ModelFieldType.String)
         
                
            )
        )
        .Proxy(
            X.AjaxProxy()
            .Url(Url.Action("GetProductClass", "IN20500"))
            .ActionMethods(action =>
            {
                action.Read = HttpMethod.POST;
            })
            .Reader(X.JsonReader().Root("data").TotalProperty("totaldata"))
        )
        .Parameters(ps =>
        {
            ps.Add(new StoreParameter("ClassID", "App.cboClassID.value", ParameterMode.Raw));
        })
        .Listeners(p => p.Load.Handler = "loadDataAutoHeaderSmall()")
  )


@(Html.X().Store().ID("storeGrid").AutoLoad(false)
        //.Model(Util.GenerateModel(typeof(ppv_IN20500_getCompany_Result), "ppv_IN20500_getCompany_ResultModel", "CpnyID"))
        .Model(
            X.Model()
            .Name("GetCompany_ResultModel")
            .IDProperty("CpnyID")
            .Fields(
                X.ModelField().Name("ClassID").Type(ModelFieldType.String)
                ,X.ModelField().Name("CpnyID").Type(ModelFieldType.String)
                ,X.ModelField().Name("CpnyName").Type(ModelFieldType.String)
                
                
            )
        )
        .Proxy(
            X.AjaxProxy()
            .Url(Url.Action("GetCompanyClass", "IN20500"))
            .ActionMethods(action =>
            {
                action.Read = HttpMethod.POST;
            })
            .Reader(X.JsonReader().Root("data").TotalProperty("totaldata"))
        )
            .Parameters(ps =>
                            {
                                ps.Add(new StoreParameter("ClassID", "App.cboClassID.value", ParameterMode.Raw));
                                ps.Add(new StoreParameter("InvtID", "App.cboInvtID.value", ParameterMode.Raw));
                                ps.Add(new StoreParameter("chooseGrid", "App.chooseGrid.value",ParameterMode.Raw));
                            })
       // .Listeners(p=>p.Load.Handler="loadGrid()" )
  )


@(Html.HQ().Store().ID("ApproveStatusAll").HQProcedure("ppv_IN20500ApproveStatus").HQDBSys(false).LoadData())


@(
 Html.X().Viewport().Layout(LayoutType.Fit)
.Items(
        X.FormPanel()
        .Layout(LayoutType.Column)
        .ID("treeForm")
        //.TrackResetOnLoad(true)
        .DefaultAnchor("100%")
        .AutoScroll(true)
        .BodyPadding(5)
        .TopBar(Util.SetupToolbar("Print",true))
        .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
        //.Listeners(itm => itm.AfterRender.Fn = "frmloadAfterRender")
        //.LayoutConfig(new HBoxLayoutConfig { Align = HBoxAlign.Stretch })
        .Items(
                Html.X().TreePanel().ID("IDTree")
                .Title("Tree")
                .Layout(LayoutType.Fit)
                
                .ColumnWidth(0.20)
                .Height(500)
                .Width(250)
                .Border(false)
                //.Store(Html.X().TreeStore()
                //    .Proxy(
                //        Html.X().AjaxProxy().Url(Url.Action("GetInventory","IN20500"))
                //    )
                //    .Parameters(ps =>
                //            {
                //                ps.Add(new StoreParameter("ClassID", "App.cboClassID.value", ParameterMode.Raw));
                //            })
                    
                //    )
                
                .SelectionModel(Html.X().TreeSelectionModel().ID("Tree").Mode(SelectionMode.Multi))
                .Root(
                    (Node)ViewData["resultRoot"]
                    //Html.X().Node().NodeID("0").Text("Root")
                )
                .Listeners(lst =>
                                    {
                                       
                                        lst.ItemClick.Fn = "NodeSelected_Change";
                                        //lst.Focus.Fn = "Focus1_Change";
                                    })
                
                ,X.FormPanel()
                .Layout(LayoutType.Fit)
                .ColumnWidth(0.80)
                .ID("dataForm")
                .AutoScroll(true)
                .TrackResetOnLoad(true)
                .DefaultAnchor("100%")
                //.AnchorVertical("100%")
                //.AnchorHorizontal("100%")
                .BodyPadding(2)
                //.TopBar(Util.SetupToolbar("Print",true))
                .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
                
                .Items(
                    X.Panel().ID("Header").Layout(LayoutType.Anchor)
                    .Items(
                        X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                        .Items(
                        
                            HQ.Combo().ID("cboInvtID").Name("cboInvtID").HQLangCode("InvtID").HQProcedure("ppv_IN20500loadInvtID")
                            .HQColumnShow("InvtID,Descr,Descr1,BarCode,Color").DisplayField("InvtID").ValueField("InvtID")
                            .Width(300).HQHeightWidth(400, 500).MarginSpec("5 0 0 0").AllowBlank(false)
                            .HQDBSys(false)//.MaxLength(30).EnforceMaxLength(true)
                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                            .LoadData()
                                .Listeners(lst =>
                                    {
                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                        lst.Change.Fn = "cboInvtID_Change";
                                        lst.Focus.Fn = "Focus1_Change";
                                    })

                             //, HQ.Button().MarginSpec("5 0 5 5").Width(150).ID("btnCopy")
                             //.HQLangCode("Copy From").Listeners(p =>
                             //    {
                             //        //p.Click.Fn = "LoadGrid";



                             //    })
                                
                                 
                             , HQ.TextBox().ID("txtBarCode").Name("txtBarCode").HQLangCode("BarCode").DataIndex("BarCode")
                            .Width(200).MarginSpec("5 0 0 0").MaxLength(20).EnforceMaxLength(true)
                            
                            
                            , HQ.Combo().ID("cboApproveStatus").Name("cboApproveStatus").HQLangCode("ApproveStatus").HQProcedure("ppv_IN20500ApproveStatus")
                            .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("ApproveStatus").Disabled(true)//.SelectedItems("H")//.SetValueAndFireSelect("H")
                            .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                            .HQDBSys(false).ForceSelection(true)//.MaxLength(5).EnforceMaxLength(true)
                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                            .HQParam(new StoreParameterCollection()
                                {

                                })
                            .LoadData()
                            .Listeners(lst =>
                                {
                                    lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                    lst.Change.Fn = "cboApproveStatus_Change";
                                    //lst.Focus.Fn = "Focus1_Change";
                                    
                                })
                                
                             
                                                
                                
                            )
                            
                            ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                            .Items(
                            
                                  HQ.TextBox().ID("txtDescr").Name("txtDescr").HQLangCode("Descr").DataIndex("Descr")
                                .Width(400).MarginSpec("5 0 0 0").MaxLength(100).EnforceMaxLength(true)
                                .Listeners(lst =>
                                {

                                    lst.Change.Fn = "txtDescr_Change";
                                    
                                })
                            
                            
                                 , HQ.Combo().ID("cboHandle").Name("cboHandle").HQLangCode("Handle").HQProcedure("ppv_IN20500Handle")
                                .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code")//.DataIndex("Handle")
                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")//.AllowBlank(false)
                                .HQDBSys(false).ForceSelection(true)//.MaxLength(5).EnforceMaxLength(true)
                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                .HQParam(new StoreParameterCollection()
                                    {
                                        
                                        new StoreParameter() { Name = "@Status", Value = "App.cboApproveStatus.value", Mode = ParameterMode.Raw },
                                        //@Role nay sua sau
                                        new StoreParameter() { Name = "@Roles",  Value = @ViewBag.Roles, Mode = ParameterMode.Value },
                                        new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                    })
                                .LoadData()
                                .Listeners(lst =>
                                    {
                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                        //lst.Change.Fn = "cboMailID_Change";
                                        //lst.Focus.Fn = "Focus1_Change";
                                    })
                            
                            
                            
                                )
                                
                                
                                ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                .Items(
                                
                                
                                HQ.TextBox().ID("txtDescr1").Name("txtDescr1").HQLangCode("Descr1").DataIndex("Descr1")
                                .Width(400).MarginSpec("5 0 0 0").MaxLength(100).EnforceMaxLength(true)
                            

                                , HQ.TextBox().ID("chooseGrid").Name("chooseGrid").Hidden(true) 
                                
                                
                                )
                                
                                ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                .Items(
                                
                                    HQ.Combo().ID("cboStatus").Name("cboStatus").HQLangCode("Status").HQProcedure("ppv_IN20500Status")
                                    .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("Status")
                                    .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                    .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                    .HQParam(new StoreParameterCollection() 
                                        { 
                                        
                                        })
                                    .LoadData()
                                    .Listeners(lst =>
                                        {
                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                            
                                        })
                                
                                    
                                     ,HQ.Checkbox().ID("chkPublic").Name("chkPublic").HQLangCode("Public").DataIndex("Public")
                                    .Width(400).MarginSpec("5 0 0 50")
                                    .Listeners(lst=>
                                        {
                                            lst.Change.Fn = "chkPublic_Change";
                           
                                        })   
                                
                                
                                
                                
                                
                                )
                                
                                 , X.TabPanel()
                                .Layout(LayoutType.Anchor)
                                .ID("tabAtIN20500")
                                //.AnchorVertical("100%")
                                //.AnchorHorizontal("100%")
                                .DefaultAnchor("100%")
                                .Listeners(p =>
                                {  
                                    //p.AfterRender.Handler = "tabSA_Setup_AfterRender(this, 100)";
                                    p.TabChange.Fn = "Tab_Change";
                                })
                                .Items(
                                        X.Panel()
                                        .ID("tabInfo")
                                        .Layout(LayoutType.Column)
                                        .AnchorVertical("100%")
                                        .AnchorHorizontal("100%")
                                        .Title(Util.GetLang("DfltInfo"))
                                        .Padding(5)
                                        .Items(
                                                 X.FormPanel()
                                                .Layout(LayoutType.Anchor)
                                                .ColumnWidth(0.50)
                                                .ID("datatabInfo1")
                                                .AutoScroll(true)
                                                //.Height(250)
                                                //.TrackResetOnLoad(true)
                                                .DefaultAnchor("100%")
                                                //.AnchorVertical("100%")
                                                //.AnchorHorizontal("100%")
                                                .BodyPadding(2)
                                                //.TopBar(Util.SetupToolbar("Print",true))
                                                .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
                
                                                .Items(
                                         
                                             
                                                 HQ.Combo().ID("cboClassID").Name("cboClassID").HQLangCode("ClassID").HQProcedure("ppv_ProductCLassAll")
                                                .HQColumnShow("ClassID,Descr").DisplayField("Descr").ValueField("ClassID").DataIndex("ClassID")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                { 
                                                   // new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        lst.Change.Fn = "cboClassID_Change";
                                                        lst.Focus.Fn = "Focus3_Change";
                                                    })
                                                    
                                                    
                                                    //,HQ.Checkbox().ID("chkStkItem").Name("chkStkItem").HQLangCode("StkItem").DataIndex("StkItem")
                                                    //.Width(400).MarginSpec("5 0 0 50")
                                                    //.Listeners(lst=>
                                                    //    {
                                                    //        //lst.Change.Fn = "chkPublic_Change";
                           
                                                    //    })  
                                                    
                                                    
                                                    
                                                
                                                   
                                                
                                                ,HQ.Combo().ID("cboPriceClassID").Name("cboPriceClassID").HQLangCode("PriceClassID").HQProcedure("ppv_ItemPriceClass")
                                                .HQColumnShow("PriceClassID,Descr").DisplayField("Descr").ValueField("PriceClassID").DataIndex("PriceClassID")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                { 
                                                    // new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    })
                                                    
                                                    
                                                ,HQ.Combo().ID("cboInvtType").Name("cboInvtType").HQLangCode("Type").HQProcedure("ppv_IN20500IvntType")
                                                .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("InvtType")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                    { 
                                                        new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                    })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    })        
                                                        
                                                
                                                ,HQ.Combo().ID("cboSource").Name("cboSource").HQLangCode("Source").HQProcedure("ppv_IN20500Source")
                                                .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("Source")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                    { 
                                                        new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                    })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    })     
                                                            
                                                 ,HQ.Combo().ID("cboValMthd").Name("cboValMthd").HQLangCode("ValMthd").HQProcedure("ppv_IN20500ValMthd")
                                                .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("ValMthd")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                    { 
                                                        new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                    })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    })   
                            
                                                 ,HQ.Combo().ID("cboLotSerTrack").Name("cboLotSerTrack").HQLangCode("LotSerTrack").HQProcedure("ppv_IN20500LotSerTrack")
                                                .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("LotSerTrack")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                .HQParam(new StoreParameterCollection() 
                                                    { 
                                                        new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                    })
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        lst.Change.Fn = "cboLotSerTrack_Change";
                               
                                                    })        
                                                    
                                                    
                                                 ,HQ.Combo().ID("cboBuyer").Name("cboBuyer").HQLangCode("Buyer").HQProcedure("ppv_BuyerAll")
                                                .HQColumnShow("Buyer,BuyerName").DisplayField("Buyer").ValueField("Buyer").DataIndex("Buyer")
                                                .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                        
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    })     
                                                    
                                                    
                                                      
                                                    // sua store cua cai nay lai sau cung voi ben IN20200
                                                   ,HQ.Combo().ID("cboStkUnit").Name("cboStkUnit").HQLangCode("StkUnit").HQProcedure("ppv_IN20500getToUnit")
                                                    .HQColumnShow("ToUnit").DisplayField("ToUnit").ValueField("ToUnit").DataIndex("StkUnit")
                                                    .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                    .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                        .HQParam(new StoreParameterCollection() 
                                                        { 
                                                            //new StoreParameter() { Name = "@ClassID", Value = "App.cboClassID.value", Mode = ParameterMode.Raw }
                                                        })
                                                    .LoadData()
                                                    .Listeners(lst =>
                                                        {
                                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                            lst.Change.Fn = "cboStkUnit_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        })    
                                                    
                                                      ,HQ.Combo().ID("cboDfltPOUnit").Name("cboDfltPOUnit").HQLangCode("POUnit").HQProcedure("ppv_IN20200getDfltPOUnitSOUnit")
                                                        .HQColumnShow("FromUnit").DisplayField("FromUnit").ValueField("FromUnit").DataIndex("DfltPOUnit")
                                                        .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                        .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                            .HQParam(new StoreParameterCollection() 
                                                            { 
                                                                new StoreParameter() { Name = "@ToUnit", Value = "App.cboStkUnit.value", Mode = ParameterMode.Raw }
                                                            })
                                                        .LoadData()
                                                        .Listeners(lst =>
                                                            {
                                                                lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                                //lst.Change.Fn = "cboMailID_Change";
                                                                //lst.Focus.Fn = "Focus1_Change";
                                                            })
                                                    
                                                            
                                                            
                                                        , HQ.Combo().ID("cboDfltSOUnit").Name("cboDfltSOUnit").HQLangCode("SOUnit").HQProcedure("ppv_IN20200getDfltPOUnitSOUnit")
                                                        .HQColumnShow("FromUnit").DisplayField("FromUnit").ValueField("FromUnit").DataIndex("DfltSOUnit")
                                                        .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                        .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                            .HQParam(new StoreParameterCollection() 
                                                            { 
                                                                new StoreParameter() { Name = "@ToUnit", Value = "App.cboStkUnit.value", Mode = ParameterMode.Raw }
                                                            })
                                                        .LoadData()
                                                        .Listeners(lst =>
                                                            {
                                                                lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                                //lst.Change.Fn = "cboMailID_Change";
                                                                //lst.Focus.Fn = "Focus1_Change";
                                                            })   
                                                    
                                                            
                                                            
                                                          , HQ.Combo().ID("cboMaterialType").Name("cboMaterialType").HQLangCode("MaterialType").HQProcedure("ppv_MaterialTypeAll")
                                                        .HQColumnShow("MaterialType,Descr").DisplayField("Descr").ValueField("MaterialType").DataIndex("MaterialType")
                                                        .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                        .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                        .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                           
                                                        .LoadData()
                                                        .Listeners(lst =>
                                                            {
                                                                lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                                //lst.Change.Fn = "cboMailID_Change";
                                                                //lst.Focus.Fn = "Focus1_Change";
                                                            })         
                                                            
                                                    
                                                            , HQ.Combo().ID("cboDfltSlsTaxCat").Name("cboDfltSlsTaxCat").HQLangCode("TaxCat").HQProcedure("ppv_TaxCat")
                                                            .HQColumnShow("CatID,Descr").DisplayField("CatID").ValueField("CatID").DataIndex("TaxCat")
                                                            .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                            .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                            .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                
                                                            .LoadData()
                                                            .Listeners(lst =>
                                                                {
                                                                    lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                                    //lst.Change.Fn = "cboMailID_Change";
                                                                    //lst.Focus.Fn = "Focus1_Change";
                                                                })    
                                                        
                                                    )
                                                    ,X.FormPanel()
                                                    .Layout(LayoutType.Anchor)
                                                    .ColumnWidth(0.50)
                                                    .ID("datatabInfo2")
                                                    .AutoScroll(true)
                                                    //.Height(500)
                                                    //.TrackResetOnLoad(true)
                                                    .DefaultAnchor("100%")
                                                    //.AnchorVertical("100%")
                                                    //.AnchorHorizontal("100%")
                                                    .BodyPadding(2)
                                                    //.TopBar(Util.SetupToolbar("Print",true))
                                                    .FieldDefaults(act => { act.LabelAlign = LabelAlign.Right; act.LabelWidth = 150; })
                
                                                    .Items(

                                                         
                                                    
                                                          X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                                            .Items(    
                                                            
                                                            X.Container().Layout(LayoutType.VBox).MarginSpec("0 0 0 0").Width(235)
                                                        .Items(   
                                                        
                                                                HQ.Checkbox().ID("chkStkItem").Name("chkStkItem").HQLangCode("StkItem").DataIndex("StkItem")
                                                            .Width(400).MarginSpec("5 0 0 5")
                                                            .Listeners(lst =>
                                                                {
                                                                    //lst.Change.Fn = "chkPublic_Change";

                                                                })  
                                                                //Image
                                                                
                                                                ,HQ.TextBox().ID("PPCStorePicReq").Hidden(true)
                                                                ,X.Image().ID("imgPPCStorePicReq").Weight(200).Height(200).MarginSpec("5 5 5 5")

                                                               , X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 5 0")
                                                               .Items(
                                                               
                                                            
                                                                    X.FileUploadField().ID("NamePPCStorePicReq").Icon(Icon.ImageAdd).ButtonText(Util.GetLang("ChooseImage"))
                                                                    .ButtonOnly(true).MarginSpec("5 5 5 20")
                                                                    .Listeners(l =>
                                                                        {
                                                                            l.Change.Fn = "NamePPCStorePicReq_Change";
                                                                        })

                                                                    , X.Button().ID("btnClearImage").Icon(Icon.ImageDelete).Text(Util.GetLang("ClearImage")).MarginSpec("5 5 5 5")
                                                                    .Listeners(lst => lst.Click.Fn = "btnClearImage_Click")
                                                            
                                                                    , HQ.TextBox().ID("txtImageChange").Name("txtImageChange").Hidden(true) 
                                                                    
                                                                   )
                                                                 
                                                               )
                                                               //Media
                                                                , X.Container().Layout(LayoutType.VBox).MarginSpec("0 0 0 0").Width(235)
                                                                .Items(

                                                                    HQ.TextBox().ID("PPCStoreMediaReq").Hidden(true)
                                                                    , X.Image().ID("imgPPCStoreMediaReq").Weight(200).Height(200).MarginSpec("20 5 5 5")
                                                                    .Listeners(l =>
                                                                                {
                                                                                    l.Click.Fn = "PlayVideo";
                                                                                })
                                                                                
                                                                    , X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 5 0")
                                                                    .Items(


                                                                            X.FileUploadField().ID("NamePPCStoreMediaReq").Icon(Icon.ImageAdd).ButtonText(Util.GetLang("ChooseMedia"))
                                                                            .ButtonOnly(true).MarginSpec("33 5 5 5")
                                                                            .Listeners(l =>
                                                                                {
                                                                                    l.Change.Fn = "NamePPCStoreMediaReq_Change";
                                                                                })

                                                                             , X.Button().ID("btnClearMedia").Icon(Icon.ImageDelete).Text(Util.GetLang("ClearMedia")).MarginSpec("33 5 5 5")
                                                                            .Listeners(lst => lst.Click.Fn = "btnClearMedia_Click")

                                                                            
                                                                            
                                                                          )
                                                                   )
                                                            
                                                            )
                                                            
                                                        )
                                                    
                                                    
                                                    
                                                    
                                      // ngoac ket thuc tab 1              
                                       )
                                       
                                       ,X.Panel()
                                        .ID("tabAttribute")
                                        .Layout(LayoutType.Anchor)
                                        .AnchorHorizontal("100%")
                                        .AnchorVertical("100%")
                                        .Title(Util.GetLang("Attribute"))
                                        .Padding(5)
                                        .Items(
                        
                                         X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                        .Items(
                                        
                                                HQ.TextBox().ID("txtColor").Name("txtColor").HQLangCode("Color").DataIndex("Color")
                                                .Width(300).MarginSpec("5 0 0 0").MaxLength(20).EnforceMaxLength(true)
                                        
                                        
                                                ,HQ.NumberField().ID("txtPrePayPct").Name("txtPrePayPct").HQLangCode("PrePayPct").DataIndex("PrePayPct")
                                                .Width(300).MarginSpec("5 0 0 0").DecimalPrecision(0)
                                        
                                        
                                              )
                                              
                                        ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                        .Items(
                                        
                                                HQ.TextBox().ID("txtSize").Name("txtSize").HQLangCode("Size").DataIndex("Size")
                                                .Width(300).MarginSpec("5 0 0 0").MaxLength(10).EnforceMaxLength(true)
                                        
                                        
                                                ,HQ.NumberField().ID("txtPOFee").Name("txtPOFee").HQLangCode("POFee").DataIndex("POFee")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                        
                                        ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                        .Items(
                                        
                                                 HQ.Combo().ID("cboStyle").Name("cboStyle").HQLangCode("Style").HQProcedure("ppv_IN20500Style")
                                                .HQColumnShow("Nganh").DisplayField("Nganh").ValueField("Nganh").DataIndex("Style")
                                                .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    }) 
                                        
                                        
                                                ,HQ.NumberField().ID("txtSOFee").Name("txtSOFee").HQLangCode("SOFee").DataIndex("SOFee")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                                        
                                          ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                        .Items(
                                        
                                                HQ.NumberField().ID("txtStkVol").Name("txtStkVol").HQLangCode("StkVol").DataIndex("StkVol")
                                                .Width(300).MarginSpec("5 0 0 0")
                                        
                                                
                                                 ,HQ.Combo().ID("cboVendor1").Name("cboVendor1").HQLangCode("Vendor1").HQProcedure("ppv_vendor")
                                                .HQColumnShow("VendID,name").DisplayField("name").ValueField("VendID").DataIndex("VendID1")
                                                .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    }) 
                                        
                                        
                                               
                                                                               
                                              )          
                                              
                                              ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                              .Items(
                                        
                                                HQ.NumberField().ID("txtStkWt").Name("txtStkWt").HQLangCode("StkWt").DataIndex("StkWt")
                                                .Width(300).MarginSpec("5 0 0 0")
                                        
                                                
                                                 ,HQ.Combo().ID("cboVendor2").Name("cboVendor2").HQLangCode("Vendor2").HQProcedure("ppv_vendor")
                                                .HQColumnShow("VendID,name").DisplayField("name").ValueField("VendID").DataIndex("VendID2")
                                                .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    }) 
                                        
                                        
                                               
                                                                               
                                              )   
                                              
                                              ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                            .Items(
                                                    // cai nay cung sua sau
                                                 HQ.Combo().ID("cboStkWtUnit").Name("cboStkWtUnit").HQLangCode("StkWtUnit").HQProcedure("ppv_IN20500getToUnit")
                                                .HQColumnShow("ToUnit").DisplayField("ToUnit").ValueField("ToUnit").DataIndex("StkWtUnit")
                                                .Width(300).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                
                                                .LoadData()
                                                .Listeners(lst =>
                                                    {
                                                        lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                        //lst.Change.Fn = "cboMailID_Change";
                                                        //lst.Focus.Fn = "Focus1_Change";
                                                    }) 
                                        
                                        
                                                ,HQ.NumberField().ID("txtLossRate00").Name("txtLossRate00").HQLangCode("LossRate1").DataIndex("LossRate00")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                              
                                              ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                            .Items(
                                                   
                                                 HQ.NumberField().ID("txtSOPrice").Name("txtSOPrice").HQLangCode("SOPrice").DataIndex("SOPrice")
                                                .Width(300).MarginSpec("5 0 0 0")
                                        
                                        
                                                ,HQ.NumberField().ID("txtLossRate01").Name("txtLossRate01").HQLangCode("LossRate2").DataIndex("LossRate01")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                              
                                              ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                            .Items(
                                                   
                                                 HQ.NumberField().ID("txtPOPrice").Name("txtPOPrice").HQLangCode("POPrice").DataIndex("POPrice")
                                                .Width(300).MarginSpec("5 0 0 0")
                                        
                                        
                                                ,HQ.NumberField().ID("txtLossRate02").Name("txtLossRate02").HQLangCode("LossRate3").DataIndex("LossRate02")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                              
                                              ,X.Container().Layout(LayoutType.HBox).MarginSpec("0 0 0 0").Width(1235)
                                            .Items(
                                                   
                                                 HQ.NumberField().ID("txtIRSftyStkDays").Name("txtIRSftyStkDays").HQLangCode("SftyStkDay").DataIndex("IRSftyStkDays")
                                                .Width(300).MarginSpec("5 0 0 0")
                                        
                                        
                                                ,HQ.NumberField().ID("txtLossRate03").Name("txtLossRate03").HQLangCode("LossRate4").DataIndex("LossRate03")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                               
                                              )
                                              
                                              ,HQ.NumberField().ID("txtIRSftyStkPct").Name("txtIRSftyStkPct").HQLangCode("SftyStkPct").DataIndex("IRSftyStkPct")
                                               .Width(300).MarginSpec("5 0 0 0")
                                              
                                              ,HQ.NumberField().ID("txtIRSftyStkQty").Name("txtIRSftyStkQty").HQLangCode("SftyStkQty").DataIndex("IRSftyStkQty")
                                                .Width(300).MarginSpec("5 0 0 0")
                                                                                           
                                              ,HQ.NumberField().ID("txtIROverStkQty").Name("txtIROverStkQty").HQLangCode("OverStkQty").DataIndex("IROverStkQty")
                                              .Width(300).MarginSpec("5 0 0 0")
                                              
                                              
                                              
                                      // ngoac ket thuc tab 2              
                                       ) 
                                       , X.Panel()
                                            .ID("tabLotSerial")
                                            .Layout(LayoutType.Anchor)
                                            
                                            .AnchorHorizontal("100%")
                                            .AnchorVertical("100%")
                                            .Padding(5)
                                            .Title(Util.GetLang("LotSerial"))
                                            .CloseAction(CloseAction.Hide)
                                            .Disabled(true)
                                            .Items(
                
                                                    HQ.Combo().ID("cboSerAssign").Name("cboSerAssign").HQLangCode("Assignment").HQProcedure("ppv_IN20500SerAssign")
                                                    .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("SerAssign")
                                                    .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                    .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true).AllowBlank(true)
                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                    .HQParam(new StoreParameterCollection() 
                                                        { 
                                                            new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                        })        
                                                    .LoadData()
                                                    .Listeners(lst =>
                                                        {
                                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                            //lst.Change.Fn = "cboMailID_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        })      
                        
                            
                            
                                                    ,HQ.Combo().ID("cboLotSerIssMthd").Name("cboLotSerIssMthd").HQLangCode("IssMthd").HQProcedure("ppv_IN20500LotSerIssMthd")
                                                    .HQColumnShow("Descr").DisplayField("Descr").ValueField("Code").DataIndex("LotSerIssMthd")
                                                    .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                    .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true).AllowBlank(true)
                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                    .HQParam(new StoreParameterCollection() 
                                                        { 
                                                            new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                        })        
                                                    .LoadData()
                                                    .Listeners(lst =>
                                                        {
                                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                            //lst.Change.Fn = "cboMailID_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        })


                                                        , HQ.NumberField().ID("txtShelfLife").Name("txtShelfLife").HQLangCode("ShelfLife").DataIndex("ShelfLife")
                                                        .Width(400).MarginSpec("5 0 0 0")   
                            
                                                         , HQ.NumberField().ID("txtWarrantyDays").Name("txtWarrantyDays").HQLangCode("WarrantyDays").DataIndex("WarrantyDays")
                                                        .Width(400).MarginSpec("5 0 0 0")
                            
                            
                                                        ,HQ.Label().ID("lblPrefix").HQLangCode("Prefix").MarginSpec("30 0 0 0") 
                
                
                                                    ,HQ.Combo().ID("cboLotSerFxdTyp").Name("cboLotSerFxdTyp").HQLangCode("Type").HQProcedure("ppv_IN20500LotSerType")
                                                    .HQColumnShow("Code,Descr").DisplayField("Descr").ValueField("Code").DataIndex("LotSerFxdTyp")
                                                    .Width(400).HQHeightWidth(400, 300).MarginSpec("5 0 0 0")
                                                    .HQDBSys(false).ForceSelection(true)//.MaxLength(30).EnforceMaxLength(true)
                                                    .Triggers(new FieldTrigger() { Icon = TriggerIcon.Clear, HideTrigger = false })
                                                    .HQParam(new StoreParameterCollection() 
                                                        { 
                                                            new StoreParameter() { Name = "@LangID", Value = Current.LangID.ToString(), Mode = ParameterMode.Value }
                                                        })        
                                                    .LoadData()
                                                    .Listeners(lst =>
                                                        {
                                                            lst.TriggerClick.Handler = "if (index == 0) { this.clearValue();}";
                                                            //lst.Change.Fn = "cboMailID_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        }) 
                            
                            
                            
                                                       , HQ.NumberField().ID("txtLotSerFxdLen").Name("txtLotSerFxdLen").HQLangCode("Length").DataIndex("LotSerFxdLen")
                                                        .Width(400).MarginSpec("5 0 0 0")  
                
                            
                                                       , HQ.TextBox().ID("txtLotSerFxdVal").Name("txtLotSerFxdVal").HQLangCode("Value").DataIndex("LotSerFxdVal")
                                                         .Width(400).MarginSpec("5 0 0 0").MaxLength(12).EnforceMaxLength(true)
                                                         .Listeners(lst =>
                                                        {
                                
                                                            lst.Blur.Fn = "PrefixValue_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        }) 
                            
                
                                                         ,HQ.Label().ID("lblNumberic").HQLangCode("Numeric").MarginSpec("30 0 0 0") 
                             
                             
                                                          ,HQ.NumberField().ID("txtLotSerNumLen").Name("txtLotSerNumLen").HQLangCode("Length").DataIndex("LotSerNumLen")
                                                        .Width(400).MarginSpec("5 0 0 0")//.AllowBlank(false)
                
                            
                                                       ,HQ.TextBox().ID("txtLotSerNumVal").Name("txtLotSerNumVal").HQLangCode("Value").DataIndex("LotSerNumVal")
                                                         .Width(400).MarginSpec("5 0 0 0").MaxLength(25).EnforceMaxLength(true)
                                                         .Listeners(lst =>
                                                        {

                                                            lst.Blur.Fn = "LastFixValue_Change";
                                                            //lst.Focus.Fn = "Focus1_Change";
                                                        }) 
                          
                             
                                                        ,HQ.Label().ID("lblNextLotSerial").HQLangCode("NextLotSer").MarginSpec("30 0 0 0")
                            
                            
                                                        ,HQ.Label().ID("lblShowNextLotSerial").Hidden(true).MarginSpec("0 0 0 50")
                                                       .Listeners(lst =>
                                                        {

                                                            lst.AfterRender.Fn = "NextShowNextLotSerial_AfterRender";
                                
                                                        }) 
                                
                             
                             
                             
                                            // ngoac ket thuc tab 3             
                                            )
                                            , X.Panel()
                    .ID("tabCompany")
                    .Layout(LayoutType.Anchor)
                    //.AnchorHorizontal("100%")
                    //.AnchorVertical("100%")
                    .Padding(5)
                    .Title(Util.GetLang("CpnyID"))
                    .CloseAction(CloseAction.Hide)
                    .DefaultAnchor("100%")
                    //.Disabled(true)
                    .Items(
                        
                    
                        Html.X().GridPanel()
                        .Frame(true)
                        //.AnchorHorizontal("100%")
                        //.AnchorVertical("100%")
                        .Height(500)
                        //.Width(1300)
                        //.Listeners(p => p.AfterRender.Handler = "tabSA_Setup_AfterRender(this, 140)")
                        .RenderTo("contentCenter")
                        .AutoScroll(true)
                        .View(X.GridView().TrackOver(false))
                        .ID("grd").SetAutoScroll(true)
                        .StoreID("storeGrid")
                        //.Hidden(true)
                        .SortableColumns(false)
                            .Listeners(l =>
                                    {
                                        l.ContainerMouseUp.Fn = "Focus2_Change";
                                        l.Select.Fn = "Focus2_Change";
                                        l.BeforeEdit.Fn = "Focus2_Change";
                                        l.CellClick.Fn = "Focus2_Change";
                                    })
                         .Features(
                                        Html.X().GridFilters()//Filter
                                            .Local(true)
                                                .Filters(
                                                     Html.X().StringFilter().DataIndex("CpnyID"),
                                                     Html.X().StringFilter().DataIndex("CpnyName")

                                                )

                                    )       
                        .ColumnModel(
                            Html.X().RowNumbererColumn()



                                 , Html.X().Column().Text(Util.GetLang("CpnyID")).Width(100).DataIndex("CpnyID")
                                .Editor(
                                  HQ.Combo().ID("cboCpnyID").Name("cboCpnyID").HQProcedure("ppv_IN20200_ClassCpnyID")
                                  .HQColumnShow("CpnyID,CpnyName").DisplayField("CpnyID").ValueField("CpnyID")
                                  .Width(300).HQHeightWidth(500, 400).MarginSpec("5 0 0 0").ForceSelection(true)
                                 //.HQParam(new StoreParameterCollection() { 

                                  //     new StoreParameter("@ClassID", "App.cboClassID.value" , ParameterMode.Raw),

                                  //})
                                  .HQDBSys(false).AllowBlank(false)
                                  .Listeners(lst =>
                                 {

                                     lst.Change.Fn = "cboCpnyID_Change";

                                 })

                                 .LoadData()

                              )

                              , Html.X().Column().Text(Util.GetLang("CpnyName")).DataIndex("CpnyName").Width(250).ID("cboCpnyName")
                      
                      
                      , Html.X().CommandColumn().Width(150)
                            .Commands(
                                Html.X().GridCommand()
                                    .Text(Util.GetLang("Reject"))
                                    .ToolTip(t =>
                                    {
                                        t.Text = Util.GetLang("Rejectrowchanges");
                                    })
                                    .CommandName("reject")
                                    .Icon(Icon.ArrowUndo)
                            )
                            
                            
                        .PrepareToolbar(t =>
                        {
                            t.Handler = "toolbar.items.get(0).setVisible(record.dirty);";
                        })
                        .Listeners(l =>
                        {
                            l.Command.Handler = "grd_Reject(record);";
                        })
                                                
                        
                        )

                     .SelectionModel(Html.X().RowSelectionModel().ID("SelectionModelMailAutoDetail").Mode(SelectionMode.Multi))

                        .Plugins(
                            Html.X()//Cho phep edit )
                                .CellEditing()
                                .ClicksToEdit(1)
                                .Listeners(ls =>
                                {
                                    ls.BeforeEdit.Fn = "grd_BeforeEdit";
                                    ls.Edit.Fn = "grd_Edit";
                                    ls.ValidateEdit.Fn = "grd_ValidateEdit";
                                    ls.CancelEdit.Fn = "grd_CancelEdit";

                                })
                        )
         
                        
                    
                    )
                        
                            
                                     
                                    
                                
                                
                                
                                
                                   
                                    

                                //ngoac panel chinh cua tat ca tab        
                                    )
                                    
                                    
                                    
                         
                     
                                        
              //ngoac ket thuc panel ben phai           
                  )
                                
                                
                                
                                


                

                    )
        
        
        
            


               )

      )





 )